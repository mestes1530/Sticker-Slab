{% extends 'base.html' %}
{% block content %}
<a href="{% url 'slab:show_slab' slab.id %}"><h1>{{slab.name}} <i class="material-icons">add_to_photos</i></h1></a>
<div class="grid-example col s12 m6 main_div">
    <div id="add_sticker" name="add_sticker" class="black_box single_centered_box">
        <span class="flow-text">
            <form action="{% url 'slab:create_sticker' %}" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="hidden" name="slab_id" value="{{slab.id}}"/>
                <table>
                    <tr>
                        <th colspan="2"><center><h4>Add A New Sticker</h4></center></th>
                    </tr>
                    <tr>
                        <td><font>Sticker Name:</font></td>
                        <td>
                            <div class="input-field col s6">
                                <input id="sticker_name" name="sticker_name" type="text" class="validate">
                                <label for="sticker_name">Sticker Name</label>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td><font>Sticker Color:</font></td>
                        <td>
                            <label>Sticker Color</label>
                            <select id="sticker_color" name="sticker_color" class="browser-default">
                                <option value="" disabled selected>Choose Color</option>
                                <option value="#424242">Black</option>
                                <option value="#81d4fa">Blue</option>
                                <option value="#66bb6a">Green</option>
                                <option value="#d32f2f">Red</option>
                                <option value="#ffd600">Yellow</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td><font>Sticker Type:</font></td>
                        <td>
                            <label>Sticker Type</label>
                            <select id="sticker_type" name="sticker_type" class="browser-default">
                                <option value="" disabled selected>Choose Type</option>
                                <option value="text">Text Sticker</option>
                                <option value="link">Link Sticker</option>
                                <option value="image">Image Sticker</option>
                            </select>
                        </td>
                    </tr>
                    <tr id="sticker_text_row" name="sticker_text_row">
                        <td><font><i class="material-icons">assignment</i> Post Text:</font></td>
                        <td>
                            <div class="input-field col s6">
                              <textarea id="sticker_text" name="sticker_text" class="materialize-textarea"></textarea>
                              <label for="sticker_text">Text content goes here</label>
                            </div>
                        </td>
                    </tr>
                    <tr id="sticker_link_row" name="sticker_link_row">
                        <td><font><i class="material-icons">link</i> Post Link:</font></td>
                        <td>
                            <div class="input-field col s6">
                                <input id="sticker_link" name="sticker_link" type="text" class="validate">
                                <label for="sticker_link">Paste URL link here</label>
                            </div>
                        </td>
                    </tr>
                    <tr id="sticker_image_row" name="sticker_image_row">
                        <td><font><i class="material-icons">image</i> Post Image:</font></td>
                        <td>
                            <div class="input-field col s6">
                                <div class="file-field input-field">
                                  <div class="btn green">
                                    <span>Upload</span>
                                    <input type="file" name="sticker_image" accept="image/*"/>
                                  </div>
                                  <div class="file-path-wrapper">
                                    <input class="file-path validate" type="text" name="sticker_image2" placeholder="Select the image file you want to use">
                                  </div>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td colspan ="2"><center><button class="btn btn-primary green" type="submit">Create Sticker</button></center></td>
                    </tr>
                </table>
            </form>
        </span>
    </div>
    <br>
    <br>
    <footer>
        <a class="waves-effect waves-light btn-small blue" href="{% url 'slab:show_slab' slab.id %}"><i class="material-icons">subdirectory_arrow_left</i> Back to Slab</a>
    </footer>
</div>
<!-- Changes input field depending on sticker type -->
<script type="text/javascript">
    let sticker_type = document.querySelector('#sticker_type')
    let sticker_text_row = document.querySelector('#sticker_text_row')
    let sticker_image_row = document.querySelector('#sticker_image_row')
    sticker_type.onchange = function() {
        sticker_text_row.style.display = 'none'
        sticker_link_row.style.display = 'none'
        sticker_image_row.style.display = 'none'

        var type = document.querySelector("#sticker_type").value;
        if (type === "text") {
            sticker_text_row.style.display = ''
        }
        else if (type === "link") {
            sticker_link_row.style.display = ''
        }
        else if (type === "image") {
            sticker_image_row.style.display = ''
        }
    }

    sticker_type.onchange()
</script>
{% endblock %}